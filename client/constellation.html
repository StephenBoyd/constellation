<head>
  <title>constellation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
</head>

<body>
  <header>
    <div class="container-fluid">
      <h1>constellation</h1>
      {{> loginButtons}}
    </div>
  </header>
  
  <div id="container-fluid main">

    <div class="bs-example">
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">Small modal</button>
    </div>

    <div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-sm">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">X</span>
            </button>
            <h4 class="modal-title" id="mySmallModalLabel">Small modal</h4>
          </div>
          <div class="modal-body">...</div>
        </div>
      </div>
    </div>
    <br>

    {{#if currentUser}}
      {{> newPost}}
    {{/if}}
    <div id="post-area">
        {{#each posts}}
          {{> post}}
        {{/each}}
    </div>
  </div>
</body>


<template name="newPost">
  <div id="new-post-area" class="item col-lg-3 col-md-5 col-sm-5 col-xs-11">
    {{#autoForm collection="Posts" id="newPost" class="new-post" type="insert" label=none}}
      <fieldset>
        {{> afQuickField name='text' rows=7 placeholder="Type your new post here."}}
      </fieldset>
      <button type="submit" class="btn btn-primary">
        <span class="glyphicon glyphicon-plus"></span> submit
      </button>
    {{/autoForm}}
  </div>
</template>

<template name="post">
  <div class="item masonry-brick col-lg-3 col-md-5 col-sm-5 col-xs-11">
    <div class="post-header">
      <strong>{{username}}</strong>
      <span class="date">{{prettifyDate createdAt}}</span>
      {{#if isOwner}}
        <div class="post-options">
          <span type="button" class="edit">
            <span class="glyphicon glyphicon-pencil"></span>
          </span>
          <span type="button" class="delete">
            <span class="glyphicon glyphicon-remove"></span>
          </span>
        </div>
      {{/if}}
    </div>
    <br>
    <span class="text pre">{{text}}</span>
    <br>
    <br>
  </div>
</template>
